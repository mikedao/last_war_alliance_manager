<section class="flex justify-center items-center min-h-[60vh]">
  <div class="bg-[var(--lw-surface)] border-2 border-[var(--lw-accent-3)] rounded-2xl shadow-xl px-10 py-12 max-w-6xl w-full">
    <div class="flex justify-between items-center mb-6">
      <h1 class="font-bold text-3xl text-[var(--lw-accent-2)]">Players in Your Alliance</h1>
      <%= link_to 'Create New Player', new_alliance_player_path(@alliance), class: "rounded bg-[var(--lw-accent-2)] text-[var(--lw-bg)] font-bold px-4 py-2 hover:bg-[var(--lw-accent)] transition" %>
    </div>

    <div class="mb-6">
      <div class="flex gap-2">
        <%= link_to 'All Players', alliance_players_path(@alliance), class: "px-4 py-2 rounded #{params[:filter].blank? ? 'bg-[var(--lw-accent-2)] text-[var(--lw-bg)]' : 'bg-[var(--lw-accent-4)] text-[var(--lw-text)]'} transition" %>
        <%= link_to 'Active Only', alliance_players_path(@alliance, filter: 'active'), class: "px-4 py-2 rounded #{params[:filter] == 'active' ? 'bg-[var(--lw-accent-2)] text-[var(--lw-bg)]' : 'bg-[var(--lw-accent-4)] text-[var(--lw-text)]'} transition" %>
        <%= link_to 'Inactive Only', alliance_players_path(@alliance, filter: 'inactive'), class: "px-4 py-2 rounded #{params[:filter] == 'inactive' ? 'bg-[var(--lw-accent-2)] text-[var(--lw-bg)]' : 'bg-[var(--lw-accent-4)] text-[var(--lw-text)]'} transition" %>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full text-[var(--lw-text)]">
        <thead>
          <tr class="border-b border-[var(--lw-accent-3)]">
            <th class="text-left py-3 px-4">Username</th>
            <th class="text-left py-3 px-4">Rank</th>
            <th class="text-left py-3 px-4">Level</th>
            <th class="text-left py-3 px-4">Status</th>
            <th class="text-left py-3 px-4">Notes</th>
            <th class="text-left py-3 px-4">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @players.each do |player| %>
            <tr class="border-b border-[var(--lw-accent-3)]" data-player-username="<%= player.username %>">
              <td class="py-3 px-4"><%= player.username %></td>
              <td class="py-3 px-4"><%= player.rank %></td>
              <td class="py-3 px-4"><%= player.level %></td>
              <td class="py-3 px-4">
                <span class="inline-block w-3 h-3 rounded-full <%= player.active? ? 'bg-green-500' : 'bg-red-500' %>"></span>
                <%= player.active? ? 'Active' : 'Inactive' %>
              </td>
              <td class="py-3 px-4 max-w-xs"><%= player.notes %></td>
              <td class="py-3 px-4">
                <div class="flex gap-2">
                  <%= link_to 'Edit', edit_alliance_player_path(@alliance, player), class: "text-blue-400 hover:text-blue-300" %>
                  <%= button_to 'Delete', alliance_player_path(@alliance, player), method: :delete, class: "text-red-400 hover:text-red-300 bg-transparent border-none p-0", form: { style: 'display: inline;' } %>
                  <button class="toggle-active text-yellow-400 hover:text-yellow-300 bg-transparent border-none p-0" data-player-id="<%= player.id %>">
                    <%= player.active? ? 'ðŸ”´' : 'ðŸŸ¢' %>
                  </button>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</section>
